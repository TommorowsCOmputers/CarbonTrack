{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_common","_NativeError","_BannerAdSize","_validateAdRequestOptions","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","sizeRegex","BaseAd","exports","React","forwardRef","unitId","sizes","requestOptions","manualImpressionsEnabled","props","ref","dimensions","setDimensions","useState","useEffect","Error","length","every","size","BannerAdSize","test","parsedRequestOptions","JSON","stringify","validateAdRequestOptions","message","onNativeEvent","nativeEvent","type","isFunction","eventHandler","eventPayload","width","height","NativeError","fromEvent","name","data","style","includes","FLUID","createElement","GoogleMobileAdsBannerView","request","displayName","requireNativeComponent"],"sources":["BaseAd.tsx"],"sourcesContent":["/* eslint-disable react/prop-types */\n/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { NativeMethods, requireNativeComponent } from 'react-native';\nimport { isFunction } from '../common';\nimport { NativeError } from '../internal/NativeError';\nimport { BannerAdSize } from '../BannerAdSize';\nimport { validateAdRequestOptions } from '../validateAdRequestOptions';\nimport { GAMBannerAdProps } from '../types/BannerAdProps';\nimport { RequestOptions } from '../types/RequestOptions';\n\ntype NativeEvent =\n  | {\n      type: 'onAdLoaded' | 'onSizeChange';\n      width: number;\n      height: number;\n    }\n  | { type: 'onAdOpened' | 'onAdClosed' }\n  | {\n      type: 'onAdFailedToLoad';\n      code: string;\n      message: string;\n    }\n  | {\n      type: 'onAppEvent';\n      name: string;\n      data?: string;\n    };\n\nconst sizeRegex = /([0-9]+)x([0-9]+)/;\n\nexport const BaseAd = React.forwardRef<GoogleMobileAdsBannerView, GAMBannerAdProps>(\n  ({ unitId, sizes, requestOptions, manualImpressionsEnabled, ...props }, ref) => {\n    const [dimensions, setDimensions] = useState<(number | string)[]>([0, 0]);\n\n    useEffect(() => {\n      if (!unitId) {\n        throw new Error(\"BannerAd: 'unitId' expected a valid string unit ID.\");\n      }\n    }, [unitId]);\n\n    useEffect(() => {\n      if (\n        sizes.length === 0 ||\n        !sizes.every(size => size in BannerAdSize || sizeRegex.test(size))\n      ) {\n        throw new Error(\"BannerAd: 'size(s)' expected a valid BannerAdSize or custom size string.\");\n      }\n    }, [sizes]);\n\n    const parsedRequestOptions = JSON.stringify(requestOptions);\n\n    useEffect(() => {\n      if (requestOptions) {\n        try {\n          validateAdRequestOptions(requestOptions);\n        } catch (e) {\n          if (e instanceof Error) {\n            throw new Error(`BannerAd: ${e.message}`);\n          }\n        }\n      }\n    }, [parsedRequestOptions]);\n\n    function onNativeEvent({ nativeEvent }: { nativeEvent: NativeEvent }) {\n      const { type } = nativeEvent;\n\n      if (type !== 'onSizeChange' && isFunction(props[type])) {\n        let eventHandler, eventPayload;\n        switch (type) {\n          case 'onAdLoaded':\n            eventPayload = {\n              width: nativeEvent.width,\n              height: nativeEvent.height,\n            };\n            if ((eventHandler = props[type])) eventHandler(eventPayload);\n            break;\n          case 'onAdFailedToLoad':\n            eventPayload = NativeError.fromEvent(nativeEvent, 'googleMobileAds');\n            if ((eventHandler = props[type])) eventHandler(eventPayload);\n            break;\n          case 'onAppEvent':\n            eventPayload = {\n              name: nativeEvent.name,\n              data: nativeEvent.data,\n            };\n            if ((eventHandler = props[type])) eventHandler(eventPayload);\n            break;\n          default:\n            if ((eventHandler = props[type])) eventHandler();\n        }\n      }\n\n      if (type === 'onAdLoaded' || type === 'onSizeChange') {\n        const { width, height } = nativeEvent;\n        if (width && height) setDimensions([width, height]);\n      }\n    }\n\n    const style = sizes.includes(BannerAdSize.FLUID)\n      ? {\n          width: '100%',\n          height: dimensions[1],\n        }\n      : {\n          width: dimensions[0],\n          height: dimensions[1],\n        };\n\n    return (\n      <GoogleMobileAdsBannerView\n        ref={ref}\n        sizes={sizes}\n        style={style}\n        unitId={unitId}\n        request={validateAdRequestOptions(requestOptions)}\n        manualImpressionsEnabled={!!manualImpressionsEnabled}\n        onNativeEvent={onNativeEvent}\n      />\n    );\n  },\n);\nBaseAd.displayName = 'BaseAd';\n\ninterface NativeBannerProps {\n  sizes: GAMBannerAdProps['sizes'];\n  style: {\n    width?: number | string;\n    height?: number | string;\n  };\n  unitId: string;\n  request: RequestOptions;\n  manualImpressionsEnabled: boolean;\n  onNativeEvent: (event: { nativeEvent: NativeEvent }) => void;\n}\n\nconst GoogleMobileAdsBannerView = requireNativeComponent<NativeBannerProps>(\n  'RNGoogleMobileAdsBannerView',\n);\nexport type GoogleMobileAdsBannerView = React.Component<NativeBannerProps> & NativeMethods;\n"],"mappings":"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","ignoreList":[]}