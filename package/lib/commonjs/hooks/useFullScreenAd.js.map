{"version":3,"names":["_react","require","_AdEventType","_RewardedAdEventType","initialState","isLoaded","isOpened","isClicked","isClosed","error","undefined","reward","isEarnedReward","useFullScreenAd","ad","state","setState","useReducer","prevState","newState","isShowing","load","useCallback","show","showOptions","useEffect","unsubscribe","addAdEventsListener","type","payload","AdEventType","LOADED","OPENED","CLOSED","CLICKED","ERROR","RewardedAdEventType","EARNED_REWARD"],"sources":["useFullScreenAd.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { Reducer, useCallback, useEffect, useReducer } from 'react';\n\nimport { AdEventType } from '../AdEventType';\nimport { AppOpenAd } from '../ads/AppOpenAd';\nimport { InterstitialAd } from '../ads/InterstitialAd';\nimport { RewardedAd } from '../ads/RewardedAd';\nimport { RewardedInterstitialAd } from '../ads/RewardedInterstitialAd';\nimport { RewardedAdEventType } from '../RewardedAdEventType';\nimport { AdStates, AdHookReturns } from '../types/AdStates';\nimport { AdShowOptions } from '../types/AdShowOptions';\nimport { RewardedAdReward } from '../types/RewardedAdReward';\n\nconst initialState: AdStates = {\n  isLoaded: false,\n  isOpened: false,\n  isClicked: false,\n  isClosed: false,\n  error: undefined,\n  reward: undefined,\n  isEarnedReward: false,\n};\n\nexport function useFullScreenAd<\n  T extends AppOpenAd | InterstitialAd | RewardedAd | RewardedInterstitialAd | null,\n>(ad: T): AdHookReturns {\n  const [state, setState] = useReducer<Reducer<AdStates, Partial<AdStates>>>(\n    (prevState, newState) => ({ ...prevState, ...newState }),\n    initialState,\n  );\n  const isShowing = state.isOpened && !state.isClosed;\n\n  const load = useCallback(() => {\n    if (ad) {\n      setState(initialState);\n      ad.load();\n    }\n  }, [ad]);\n\n  const show = useCallback(\n    (showOptions?: AdShowOptions) => {\n      if (ad) {\n        ad.show(showOptions);\n      }\n    },\n    [ad],\n  );\n\n  useEffect(() => {\n    setState(initialState);\n    if (!ad) {\n      return;\n    }\n    const unsubscribe = (ad as RewardedAd).addAdEventsListener(({ type, payload }) => {\n      switch (type) {\n        case AdEventType.LOADED:\n          setState({ isLoaded: true });\n          break;\n        case AdEventType.OPENED:\n          setState({ isOpened: true });\n          break;\n        case AdEventType.CLOSED:\n          setState({ isClosed: true, isLoaded: false });\n          break;\n        case AdEventType.CLICKED:\n          setState({ isClicked: true });\n          break;\n        case AdEventType.ERROR:\n          setState({ error: payload as Error });\n          break;\n        case RewardedAdEventType.LOADED:\n          setState({ isLoaded: true, reward: payload as RewardedAdReward });\n          break;\n        case RewardedAdEventType.EARNED_REWARD:\n          setState({ isEarnedReward: true, reward: payload as RewardedAdReward });\n          break;\n      }\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [ad]);\n\n  return {\n    ...state,\n    isShowing,\n    load,\n    show,\n  };\n}\n"],"mappings":";;;;;;AAiBA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,YAAA,GAAAD,OAAA;AAKA,IAAAE,oBAAA,GAAAF,OAAA;AAxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAcA,MAAMG,YAAsB,GAAG;EAC7BC,QAAQ,EAAE,KAAK;EACfC,QAAQ,EAAE,KAAK;EACfC,SAAS,EAAE,KAAK;EAChBC,QAAQ,EAAE,KAAK;EACfC,KAAK,EAAEC,SAAS;EAChBC,MAAM,EAAED,SAAS;EACjBE,cAAc,EAAE;AAClB,CAAC;AAEM,SAASC,eAAeA,CAE7BC,EAAK,EAAiB;EACtB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG,IAAAC,iBAAU,EAClC,CAACC,SAAS,EAAEC,QAAQ,MAAM;IAAE,GAAGD,SAAS;IAAE,GAAGC;EAAS,CAAC,CAAC,EACxDf,YACF,CAAC;EACD,MAAMgB,SAAS,GAAGL,KAAK,CAACT,QAAQ,IAAI,CAACS,KAAK,CAACP,QAAQ;EAEnD,MAAMa,IAAI,GAAG,IAAAC,kBAAW,EAAC,MAAM;IAC7B,IAAIR,EAAE,EAAE;MACNE,QAAQ,CAACZ,YAAY,CAAC;MACtBU,EAAE,CAACO,IAAI,CAAC,CAAC;IACX;EACF,CAAC,EAAE,CAACP,EAAE,CAAC,CAAC;EAER,MAAMS,IAAI,GAAG,IAAAD,kBAAW,EACrBE,WAA2B,IAAK;IAC/B,IAAIV,EAAE,EAAE;MACNA,EAAE,CAACS,IAAI,CAACC,WAAW,CAAC;IACtB;EACF,CAAC,EACD,CAACV,EAAE,CACL,CAAC;EAED,IAAAW,gBAAS,EAAC,MAAM;IACdT,QAAQ,CAACZ,YAAY,CAAC;IACtB,IAAI,CAACU,EAAE,EAAE;MACP;IACF;IACA,MAAMY,WAAW,GAAIZ,EAAE,CAAgBa,mBAAmB,CAAC,CAAC;MAAEC,IAAI;MAAEC;IAAQ,CAAC,KAAK;MAChF,QAAQD,IAAI;QACV,KAAKE,wBAAW,CAACC,MAAM;UACrBf,QAAQ,CAAC;YAAEX,QAAQ,EAAE;UAAK,CAAC,CAAC;UAC5B;QACF,KAAKyB,wBAAW,CAACE,MAAM;UACrBhB,QAAQ,CAAC;YAAEV,QAAQ,EAAE;UAAK,CAAC,CAAC;UAC5B;QACF,KAAKwB,wBAAW,CAACG,MAAM;UACrBjB,QAAQ,CAAC;YAAER,QAAQ,EAAE,IAAI;YAAEH,QAAQ,EAAE;UAAM,CAAC,CAAC;UAC7C;QACF,KAAKyB,wBAAW,CAACI,OAAO;UACtBlB,QAAQ,CAAC;YAAET,SAAS,EAAE;UAAK,CAAC,CAAC;UAC7B;QACF,KAAKuB,wBAAW,CAACK,KAAK;UACpBnB,QAAQ,CAAC;YAAEP,KAAK,EAAEoB;UAAiB,CAAC,CAAC;UACrC;QACF,KAAKO,wCAAmB,CAACL,MAAM;UAC7Bf,QAAQ,CAAC;YAAEX,QAAQ,EAAE,IAAI;YAAEM,MAAM,EAAEkB;UAA4B,CAAC,CAAC;UACjE;QACF,KAAKO,wCAAmB,CAACC,aAAa;UACpCrB,QAAQ,CAAC;YAAEJ,cAAc,EAAE,IAAI;YAAED,MAAM,EAAEkB;UAA4B,CAAC,CAAC;UACvE;MACJ;IACF,CAAC,CAAC;IACF,OAAO,MAAM;MACXH,WAAW,CAAC,CAAC;IACf,CAAC;EACH,CAAC,EAAE,CAACZ,EAAE,CAAC,CAAC;EAER,OAAO;IACL,GAAGC,KAAK;IACRK,SAAS;IACTC,IAAI;IACJE;EACF,CAAC;AACH","ignoreList":[]}