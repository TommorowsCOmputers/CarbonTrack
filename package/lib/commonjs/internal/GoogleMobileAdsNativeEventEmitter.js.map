{"version":3,"names":["_reactNative","require","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","RNAppModule","NativeModules","GANativeEventEmitter","NativeEventEmitter","constructor","ready","addListener","eventType","listener","context","eventsNotifyReady","eventsAddListener","subscription","originalRemove","remove","newRemove","eventsRemoveListener","removeSubscription","removeAllListeners","replace","GoogleMobileAdsNativeEventEmitter","exports"],"sources":["GoogleMobileAdsNativeEventEmitter.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { NativeEventEmitter, NativeModules, EmitterSubscription } from 'react-native';\n\nconst { RNAppModule } = NativeModules;\n\nclass GANativeEventEmitter extends NativeEventEmitter {\n  ready: boolean;\n\n  constructor() {\n    super(RNAppModule);\n    this.ready = false;\n  }\n\n  addListener(\n    eventType: string,\n    listener: (event: { appName?: string }) => void,\n    context?: Record<string, unknown>,\n  ) {\n    if (!this.ready) {\n      RNAppModule.eventsNotifyReady(true);\n      this.ready = true;\n    }\n    RNAppModule.eventsAddListener(eventType);\n\n    const subscription = super.addListener(`rnapp_${eventType}`, listener, context);\n\n    // React Native 0.65+ altered EventEmitter:\n    // - removeSubscription is gone\n    // - addListener returns an unsubscriber instead of a more complex object with eventType etc\n\n    // make sure eventType for backwards compatibility just in case\n    subscription.eventType = `rnapp_${eventType}`;\n\n    // New style is to return a remove function on the object, just in csae people call that,\n    // we will modify it to do our native unsubscription then call the original\n    const originalRemove = subscription.remove;\n    const newRemove = () => {\n      RNAppModule.eventsRemoveListener(eventType, false);\n      if (super.removeSubscription != null) {\n        // This is for RN <= 0.64 - 65 and greater no longer have removeSubscription\n        super.removeSubscription(subscription);\n      } else if (originalRemove != null) {\n        // This is for RN >= 0.65\n        originalRemove();\n      }\n    };\n    subscription.remove = newRemove;\n    return subscription;\n  }\n\n  removeAllListeners(eventType: string) {\n    RNAppModule.eventsRemoveListener(eventType, true);\n    super.removeAllListeners(`rnapp_${eventType}`);\n  }\n\n  // This is likely no longer ever called, but it is here for backwards compatibility with RN <= 0.64\n  removeSubscription(subscription: EmitterSubscription) {\n    RNAppModule.eventsRemoveListener(subscription.eventType.replace('rnapp_', ''), false);\n    if (super.removeSubscription != null) {\n      super.removeSubscription(subscription);\n    }\n  }\n}\n\nexport const GoogleMobileAdsNativeEventEmitter = new GANativeEventEmitter();\n"],"mappings":";;;;;;AAiBA,IAAAA,YAAA,GAAAC,OAAA;AAAsF,SAAAC,gBAAAC,CAAA,EAAAC,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAE,cAAA,CAAAF,CAAA,MAAAD,CAAA,GAAAI,MAAA,CAAAC,cAAA,CAAAL,CAAA,EAAAC,CAAA,IAAAK,KAAA,EAAAJ,CAAA,EAAAK,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAAT,CAAA,CAAAC,CAAA,IAAAC,CAAA,EAAAF,CAAA;AAAA,SAAAG,eAAAD,CAAA,QAAAQ,CAAA,GAAAC,YAAA,CAAAT,CAAA,uCAAAQ,CAAA,GAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAC,aAAAT,CAAA,EAAAD,CAAA,2BAAAC,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAF,CAAA,GAAAE,CAAA,CAAAU,MAAA,CAAAC,WAAA,kBAAAb,CAAA,QAAAU,CAAA,GAAAV,CAAA,CAAAc,IAAA,CAAAZ,CAAA,EAAAD,CAAA,uCAAAS,CAAA,SAAAA,CAAA,YAAAK,SAAA,yEAAAd,CAAA,GAAAe,MAAA,GAAAC,MAAA,EAAAf,CAAA,KAjBtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA,MAAM;EAAEgB;AAAY,CAAC,GAAGC,0BAAa;AAErC,MAAMC,oBAAoB,SAASC,+BAAkB,CAAC;EAGpDC,WAAWA,CAAA,EAAG;IACZ,KAAK,CAACJ,WAAW,CAAC;IAACnB,eAAA;IACnB,IAAI,CAACwB,KAAK,GAAG,KAAK;EACpB;EAEAC,WAAWA,CACTC,SAAiB,EACjBC,QAA+C,EAC/CC,OAAiC,EACjC;IACA,IAAI,CAAC,IAAI,CAACJ,KAAK,EAAE;MACfL,WAAW,CAACU,iBAAiB,CAAC,IAAI,CAAC;MACnC,IAAI,CAACL,KAAK,GAAG,IAAI;IACnB;IACAL,WAAW,CAACW,iBAAiB,CAACJ,SAAS,CAAC;IAExC,MAAMK,YAAY,GAAG,KAAK,CAACN,WAAW,CAAC,SAASC,SAAS,EAAE,EAAEC,QAAQ,EAAEC,OAAO,CAAC;;IAE/E;IACA;IACA;;IAEA;IACAG,YAAY,CAACL,SAAS,GAAG,SAASA,SAAS,EAAE;;IAE7C;IACA;IACA,MAAMM,cAAc,GAAGD,YAAY,CAACE,MAAM;IAC1C,MAAMC,SAAS,GAAGA,CAAA,KAAM;MACtBf,WAAW,CAACgB,oBAAoB,CAACT,SAAS,EAAE,KAAK,CAAC;MAClD,IAAI,KAAK,CAACU,kBAAkB,IAAI,IAAI,EAAE;QACpC;QACA,KAAK,CAACA,kBAAkB,CAACL,YAAY,CAAC;MACxC,CAAC,MAAM,IAAIC,cAAc,IAAI,IAAI,EAAE;QACjC;QACAA,cAAc,CAAC,CAAC;MAClB;IACF,CAAC;IACDD,YAAY,CAACE,MAAM,GAAGC,SAAS;IAC/B,OAAOH,YAAY;EACrB;EAEAM,kBAAkBA,CAACX,SAAiB,EAAE;IACpCP,WAAW,CAACgB,oBAAoB,CAACT,SAAS,EAAE,IAAI,CAAC;IACjD,KAAK,CAACW,kBAAkB,CAAC,SAASX,SAAS,EAAE,CAAC;EAChD;;EAEA;EACAU,kBAAkBA,CAACL,YAAiC,EAAE;IACpDZ,WAAW,CAACgB,oBAAoB,CAACJ,YAAY,CAACL,SAAS,CAACY,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,EAAE,KAAK,CAAC;IACrF,IAAI,KAAK,CAACF,kBAAkB,IAAI,IAAI,EAAE;MACpC,KAAK,CAACA,kBAAkB,CAACL,YAAY,CAAC;IACxC;EACF;AACF;AAEO,MAAMQ,iCAAiC,GAAAC,OAAA,CAAAD,iCAAA,GAAG,IAAIlB,oBAAoB,CAAC,CAAC","ignoreList":[]}