{"version":3,"names":["NativeError","Error","fromEvent","errorEvent","namespace","stack","userInfo","constructor","nativeError","jsStack","_defineProperty","code","message","getStackWithMessage","split","slice","join","exports"],"sources":["NativeError.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport class NativeError extends Error {\n  namespace: string;\n  code: string;\n  message: string;\n  jsStack: string;\n  userInfo: { code: string; message: string };\n\n  static fromEvent(\n    errorEvent: { code: string; message: string },\n    namespace: string,\n    stack?: string,\n  ) {\n    return new NativeError({ userInfo: errorEvent }, stack || new Error().stack || '', namespace);\n  }\n\n  constructor(\n    nativeError: { userInfo: { code: string; message: string } },\n    jsStack: string,\n    namespace: string,\n  ) {\n    super();\n    const { userInfo } = nativeError;\n    this.namespace = namespace;\n    this.code = `${this.namespace}/${userInfo.code || 'unknown'}`;\n    this.message = `[${this.code}] ${userInfo.message}`;\n    this.jsStack = jsStack;\n    this.userInfo = userInfo;\n    this.stack = NativeError.getStackWithMessage(`NativeError: ${this.message}`, this.jsStack);\n  }\n\n  /**\n   * Build a stack trace that includes JS stack prior to calling the native method.\n   *\n   * @returns {string}\n   */\n  static getStackWithMessage(message: string, jsStack: string) {\n    return [message, ...jsStack.split('\\n').slice(2, 13)].join('\\n');\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,MAAMA,WAAW,SAASC,KAAK,CAAC;EAOrC,OAAOC,SAASA,CACdC,UAA6C,EAC7CC,SAAiB,EACjBC,KAAc,EACd;IACA,OAAO,IAAIL,WAAW,CAAC;MAAEM,QAAQ,EAAEH;IAAW,CAAC,EAAEE,KAAK,IAAI,IAAIJ,KAAK,CAAC,CAAC,CAACI,KAAK,IAAI,EAAE,EAAED,SAAS,CAAC;EAC/F;EAEAG,WAAWA,CACTC,WAA4D,EAC5DC,OAAe,EACfL,SAAiB,EACjB;IACA,KAAK,CAAC,CAAC;IAACM,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA;IACR,MAAM;MAAEJ;IAAS,CAAC,GAAGE,WAAW;IAChC,IAAI,CAACJ,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACO,IAAI,GAAG,GAAG,IAAI,CAACP,SAAS,IAAIE,QAAQ,CAACK,IAAI,IAAI,SAAS,EAAE;IAC7D,IAAI,CAACC,OAAO,GAAG,IAAI,IAAI,CAACD,IAAI,KAAKL,QAAQ,CAACM,OAAO,EAAE;IACnD,IAAI,CAACH,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACH,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACD,KAAK,GAAGL,WAAW,CAACa,mBAAmB,CAAC,gBAAgB,IAAI,CAACD,OAAO,EAAE,EAAE,IAAI,CAACH,OAAO,CAAC;EAC5F;;EAEA;AACF;AACA;AACA;AACA;EACE,OAAOI,mBAAmBA,CAACD,OAAe,EAAEH,OAAe,EAAE;IAC3D,OAAO,CAACG,OAAO,EAAE,GAAGH,OAAO,CAACK,KAAK,CAAC,IAAI,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;EAClE;AACF;AAACC,OAAA,CAAAjB,WAAA,GAAAA,WAAA","ignoreList":[]}