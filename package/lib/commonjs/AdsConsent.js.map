{"version":3,"names":["_core","require","_reactNative","_AdsConsentDebugGeography","_AdsConsentPurposes","_AdsConsentSpecialFeatures","_common","native","NativeModules","RNGoogleMobileAdsConsentModule","AdsConsent","exports","requestInfoUpdate","options","isObject","Error","isPropertySet","debugGeography","AdsConsentDebugGeography","DISABLED","EEA","NOT_EEA","isBoolean","tagForUnderAgeOfConsent","isArray","testDeviceIdentifiers","deviceId","isString","showForm","reset","getTCString","getTCModel","tcString","TCString","decode","getUserChoices","tcModel","e","TCModel","__DEV__","console","warn","activelyScanDeviceCharacteristicsForIdentification","specialFeatureOptins","has","AdsConsentSpecialFeatures","ACTIVELY_SCAN_DEVICE_CHARACTERISTICS_FOR_IDENTIFICATION","applyMarketResearchToGenerateAudienceInsights","purposeConsents","AdsConsentPurposes","APPLY_MARKET_RESEARCH_TO_GENERATE_AUDIENCE_INSIGHTS","createAPersonalisedAdsProfile","CREATE_A_PERSONALISED_ADS_PROFILE","createAPersonalisedContentProfile","developAndImproveProducts","DEVELOP_AND_IMPROVE_PRODUCTS","measureAdPerformance","MEASURE_AD_PERFORMANCE","measureContentPerformance","MEASURE_CONTENT_PERFORMANCE","selectBasicAds","SELECT_BASIC_ADS","selectPersonalisedAds","SELECT_PERSONALISED_ADS","selectPersonalisedContent","SELECT_PERSONALISED_CONTENT","storeAndAccessInformationOnDevice","STORE_AND_ACCESS_INFORMATION_ON_DEVICE","usePreciseGeolocationData","USE_PRECISE_GEOLOCATION_DATA"],"sources":["AdsConsent.ts"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport { TCModel, TCString } from '@iabtcf/core';\nimport { NativeModules } from 'react-native';\nimport { AdsConsentDebugGeography } from './AdsConsentDebugGeography';\nimport { AdsConsentPurposes } from './AdsConsentPurposes';\nimport { AdsConsentSpecialFeatures } from './AdsConsentSpecialFeatures';\nimport { isPropertySet, isArray, isBoolean, isObject, isString } from './common';\nimport {\n  AdsConsentFormResult,\n  AdsConsentInfo,\n  AdsConsentInfoOptions,\n  AdsConsentInterface,\n  AdsConsentUserChoices,\n} from './types/AdsConsent.interface';\n\nconst native = NativeModules.RNGoogleMobileAdsConsentModule;\n\nexport const AdsConsent: AdsConsentInterface = {\n  requestInfoUpdate(options: AdsConsentInfoOptions = {}): Promise<AdsConsentInfo> {\n    if (!isObject(options)) {\n      throw new Error(\"AdsConsent.requestInfoUpdate(*) 'options' expected an object value.\");\n    }\n\n    if (\n      isPropertySet(options, 'debugGeography') &&\n      options.debugGeography !== AdsConsentDebugGeography.DISABLED &&\n      options.debugGeography !== AdsConsentDebugGeography.EEA &&\n      options.debugGeography !== AdsConsentDebugGeography.NOT_EEA\n    ) {\n      throw new Error(\n        \"AdsConsent.requestInfoUpdate(*) 'options.debugGeography' expected one of AdsConsentDebugGeography.DISABLED, AdsConsentDebugGeography.EEA or AdsConsentDebugGeography.NOT_EEA.\",\n      );\n    }\n\n    if (\n      isPropertySet(options, 'tagForUnderAgeOfConsent') &&\n      !isBoolean(options.tagForUnderAgeOfConsent)\n    ) {\n      throw new Error(\n        \"AdsConsent.requestInfoUpdate(*) 'options.tagForUnderAgeOfConsent' expected a boolean value.\",\n      );\n    }\n\n    if (isPropertySet(options, 'testDeviceIdentifiers')) {\n      if (!isArray(options.testDeviceIdentifiers)) {\n        throw new Error(\n          \"AdsConsent.requestInfoUpdate(*) 'options.testDeviceIdentifiers' expected an array of string values.\",\n        );\n      }\n\n      for (const deviceId of options.testDeviceIdentifiers ?? []) {\n        if (!isString(deviceId)) {\n          throw new Error(\n            \"AdsConsent.requestInfoUpdate(*) 'options.testDeviceIdentifiers' expected an array of string values.\",\n          );\n        }\n      }\n    }\n\n    return native.requestInfoUpdate(options);\n  },\n\n  showForm(): Promise<AdsConsentFormResult> {\n    return native.showForm();\n  },\n\n  reset(): void {\n    return native.reset();\n  },\n\n  getTCString(): Promise<string> {\n    return native.getTCString();\n  },\n\n  async getTCModel(): Promise<TCModel> {\n    const tcString = await native.getTCString();\n    return TCString.decode(tcString);\n  },\n\n  async getUserChoices(): Promise<AdsConsentUserChoices> {\n    const tcString = await native.getTCString();\n\n    let tcModel: TCModel;\n\n    try {\n      tcModel = TCString.decode(tcString);\n    } catch (e) {\n      tcModel = new TCModel();\n\n      if (__DEV__) {\n        // eslint-disable-next-line no-console\n        console.warn(`Failed to decode tcString ${tcString}:`, e);\n      }\n    }\n\n    return {\n      activelyScanDeviceCharacteristicsForIdentification: tcModel.specialFeatureOptins.has(\n        AdsConsentSpecialFeatures.ACTIVELY_SCAN_DEVICE_CHARACTERISTICS_FOR_IDENTIFICATION,\n      ),\n      applyMarketResearchToGenerateAudienceInsights: tcModel.purposeConsents.has(\n        AdsConsentPurposes.APPLY_MARKET_RESEARCH_TO_GENERATE_AUDIENCE_INSIGHTS,\n      ),\n      createAPersonalisedAdsProfile: tcModel.purposeConsents.has(\n        AdsConsentPurposes.CREATE_A_PERSONALISED_ADS_PROFILE,\n      ),\n      createAPersonalisedContentProfile: tcModel.purposeConsents.has(\n        AdsConsentPurposes.CREATE_A_PERSONALISED_ADS_PROFILE,\n      ),\n      developAndImproveProducts: tcModel.purposeConsents.has(\n        AdsConsentPurposes.DEVELOP_AND_IMPROVE_PRODUCTS,\n      ),\n      measureAdPerformance: tcModel.purposeConsents.has(AdsConsentPurposes.MEASURE_AD_PERFORMANCE),\n      measureContentPerformance: tcModel.purposeConsents.has(\n        AdsConsentPurposes.MEASURE_CONTENT_PERFORMANCE,\n      ),\n      selectBasicAds: tcModel.purposeConsents.has(AdsConsentPurposes.SELECT_BASIC_ADS),\n      selectPersonalisedAds: tcModel.purposeConsents.has(\n        AdsConsentPurposes.SELECT_PERSONALISED_ADS,\n      ),\n      selectPersonalisedContent: tcModel.purposeConsents.has(\n        AdsConsentPurposes.SELECT_PERSONALISED_CONTENT,\n      ),\n      storeAndAccessInformationOnDevice: tcModel.purposeConsents.has(\n        AdsConsentPurposes.STORE_AND_ACCESS_INFORMATION_ON_DEVICE,\n      ),\n      usePreciseGeolocationData: tcModel.specialFeatureOptins.has(\n        AdsConsentSpecialFeatures.USE_PRECISE_GEOLOCATION_DATA,\n      ),\n    };\n  },\n};\n"],"mappings":"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","ignoreList":[]}